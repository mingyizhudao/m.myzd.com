$("#selectCity").tap(function(c){c.preventDefault();var a=$("#cityTitle").html();var d=$("#cityTitle").attr("data-city");var b='<header id="hospital_header" class="bg-green">'+'<nav id="selectCity" class="left" data-target="closePopup">'+'<div class="grid mt17">'+'<div id="cityTitle" class="font-s16 col-0" data-city="'+d+'">'+a+"</div>"+'<div class="col-0 cityImg"></div>'+"</div>"+"</nav>"+'<h1 class="title">推荐</h1>'+"</header>"+'<article id="hospital_article" class="active" style="position:static;">'+$cityHtml+"</article>";J.popup({html:b,pos:"top",showCloseBtn:false});$(".aCity").click(function(g){g.preventDefault();var f=$(this).attr("data-city");$(".aCity").each(function(){if(f==$(this).attr("data-city")){$(this).addClass("bg-white")}else{$(this).removeClass("bg-white")}});$(".bCity").each(function(){if(f==$(this).attr("data-city")){$(this).removeClass("hide")}else{$(this).addClass("hide")}})});$(".cCity").click(function(g){g.preventDefault();$cityId=$(this).attr("data-city");$cityName=$(this).html();$condition["city"]=$cityId;$condition["page"]=1;setTimeout(function(){J.closePopup()},100);var f=$requestHospital+setUrlCondition()+"&getcount=1";J.showMask();$.ajax({url:f,success:function(e){readyHospital(e);$("#cityTitle").html($cityName);$("#cityTitle").attr("data-city",$cityId);setLocationUrl();$("#hospital_article").scrollTop(0)}})})});function readyHospital(c){var d=c.hospitals;var a='<div><div><img src="http://7xsq2z.com2.z0.glb.qiniucdn.com/146423335398248" class="w100"></div><ul class="list">';if(d.length>0){for(var b=0;b<d.length;b++){a+="<li>"+'<a href="'+$requestHospitalView+"/"+d[b].id+'">'+'<div class="pl10">'+'<div class="font-s16 color-black10">'+d[b].name+"</div>"+'<div class="color-black6 pt5"><span class="hpClassBg">'+d[b].hpClass+"<span></div>"+"</div>"+"</a>"+"</li>"}}else{a+="<li>暂无信息</li>"}a+="</ul></div>";$("#hospital_article").html(a);J.hideMask()}function setUrlCondition(){var a="";for($key in $condition){if($condition[$key]&&$condition[$key]!==""){a+="&"+$key+"="+$condition[$key]}}return a}function setLocationUrl(){var b={};var d="";var a="";for($key in $condition){if($condition[$key]&&$condition[$key]!==""){a+="&"+$key+"="+$condition[$key]}}a=a.substring(1);a="?"+a;var c=$requestHospitalIndex+a;history.pushState(b,d,c)};